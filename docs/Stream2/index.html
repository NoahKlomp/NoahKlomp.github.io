<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream</title>
    <link rel="stylesheet" href="./hljs/styles/atom-one-dark.min.css">
    <style>
        #0:hover {
            background-color: rgba(255, 0, 0, 0.2);
        }

        .prevent-select,
        svg {
            -webkit-user-select: none;
            /* Safari */
            -ms-user-select: none;
            /* IE 10 and IE 11 */
            user-select: none;
            /* Standard syntax */
        }

        .clickable {
            cursor: pointer;
        }

        #flowchartcontainer {
            overflow: auto;
            max-height: 100%;
            padding-bottom: 50px;
        }

        #actingButtons {
            height: 50px;
            /* width:100%; */
            background-color: gray;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;

        }

        button {
            margin: 10px;
            background-color: honeydew;
            color: black;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .hljs-comment {
            color: #A3D9FF;
        }

        svg {}

        svg.statement,
        svg.DoWhileLoopBox,
        svg.loopbox,
        svg.IfBox {
            font-family: monospace;
        }
    </style>
    <script src="./hljs/highlight.min.js"></script>

    <script src="./hljs/languages/python.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</head>

<body>
    
    <div id="flowchartcontainer"></div>

    <div id="actingButtons" class="funButtons">
        <button id="PythonButton" 
            onclick="new CopyCodePopUp('python',main.export);hljs.highlightAll();">To Python Comments</button>
        <button id="JavaButton" 
            onclick="new CopyCodePopUp('java',main.export);hljs.highlightAll();">To Java Comments</button>
        <button id="CopyUrlButton"
            onclick="navigator.clipboard.writeText(window.location.href);">Copy URL</button>
        <button id="ResetButton" onload="document.getElementById('ResetButton').innerHTML = Words.get('Reset')"
            onclick="window.location.href = window.location.origin+window.location.pathname;">Reset</button>
        <button id="toImgButton">Export to image</button>
        <script type="module">
            import { Canvg } from 'https://cdn.skypack.dev/canvg';

            let v = null;
            let but = document.querySelector("#toImgButton");


            but.onclick = () => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');

                v = Canvg.fromString(ctx, document.querySelector("#flowchartcontainer").innerHTML);

                v.start();

                var img = canvas.toDataURL("img/png");
                downloadFile(img, "Flowchart.png");
            }

            function downloadFile(url, fileName = "unnamed") {


                const link = document.createElement('a');
                link.href = url;
                link.download = fileName;

                link.click();

                URL.revokeObjectURL(link.href);
            }
        </script>
    </div>
    <script src="./js/Three/Language.js"></script>
    <script src="./js/Three/PopUp.js"></script>
    <script src="./js/Three/Creator.js"></script>
    <script src="./js/Three/CodeMaker.js"></script>
    <script src="./js/Three/User.js"></script>
    <script src="./js/Three/Code.js"></script>
    <script src="./js/Three/Editor.js"></script>
</body>

</html>